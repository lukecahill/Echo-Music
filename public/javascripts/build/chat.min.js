var socket=io.connect("http://localhost:8080");!function(){function e(){var e={Sender:a.val(),Message:c.val()};socket.emit("chat message",e),c.val("")}function n(){var e=$.trim(a.val());""!==a?(t.html("Welcome, <b>"+e+"</b>"),$("#setYourName").hide(),t.show()):alert("Your name cannot be blank!")}function o(){i=!1;var e={Typing:!1,Name:void 0};socket.emit("typing",e)}var t=$(".welcome"),s=$("#chatbox"),a=$("#name"),c=$("#message"),i=!1,p=void 0;t.hide(),c.on("keyup",function(n){if(13==n.keyCode&&e(),i===!1){i=!0;var t={Typing:!0,Name:a.val()};socket.emit("typing",t),p=setTimeout(o,3e3)}else clearTimeout(p),p=setTimeout(o,3e3)}),$("#sendMessage").on("click",function(){e()}),socket.on("chat message",function(e){var n='<p><span class="sender">'+e.Sender+"</span>: "+e.Message+"<hr /></p>";s.append(n),s.animate({scrollTop:s.prop("scrollHeight")},750)}),$("#setName").on("click",function(){n()}),$("#name").on("keyup",function(e){13==e.keyCode&&n()}),socket.on("messages",function(e){$.each(e,function(e,n){var o='<p class="message"><span class="sender">'+n.Sender+"</span>: "+n.Message+"</p><hr>";s.append(o),s.animate({scrollTop:s.prop("scrollHeight")},750)})}),socket.on("connect",function(e){s.empty(),socket.emit("join")}),socket.on("userTyping",function(e){$(".user-typing").text(e+" is typing...")}),socket.on("noLongerTyping",function(e){$(".user-typing").text("")})}();