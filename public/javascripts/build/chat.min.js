var socket=io.connect("http://localhost:8080");!function(){function e(){var e={Sender:s.val(),Message:c.val()};socket.emit("chat message",e),c.val("")}function n(){var e=$.trim(s.val());""!==s?(o.html("Welcome, <b>"+e+"</b>"),$("#setYourName").hide(),o.show()):alert("Your name cannot be blank!")}var o=$(".welcome"),a=$("#chatbox"),s=$("#name"),c=$("#message");o.hide(),c.on("keyup",function(n){13==n.keyCode&&e()}),$("#sendMessage").on("click",function(){e()}),socket.on("chat message",function(e){var n='<p><span class="sender">'+e.Sender+"</span>: "+e.Message+"<hr /></p>";a.append(n),a.animate({scrollTop:a.prop("scrollHeight")},750)}),$("#setName").on("click",function(){n()}),$("#name").on("keyup",function(e){13==e.keyCode&&n()}),socket.on("messages",function(e){$.each(e,function(e,n){var o='<p><span class="sender">'+n.Sender+"</span>: "+n.Message+"<hr /></p>";a.append(o),a.animate({scrollTop:a.prop("scrollHeight")},750)})}),socket.on("connect",function(e){socket.emit("join"),a.empty()})}();